<!DOCTYPE html>
<html>
<head>
<title>Hegel_artifact.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="oopsla-2025-artifact-readmemd">OOPSLA 2025 Artifact (README.md)</h1>
<h2 id="introductionoverview">Introduction/Overview</h2>
<p>This document is an overview of the Artifact for the paper: 'Close is Good Enough: Component-Based Synthesis Modulo Logical Similarty'.
The Artifact is distributed as a source control repository link.</p>
<p>The file contains two sections: The <strong>Getting Started</strong> section gives the main steps for
installing the dependencies using OCaml package manager (opam) followed by introducing small scripts for building and running <code>Hegel</code> on some sample test case.</p>
<p>The second section <strong>Step-by-step Instructions</strong> explains the structure of the directory, how to run Hegel (and other baseline tools) on all the benchmarks in the paper (Both RQ1 and RQ2 in the paper), understanding the results and how to run Hegel on an individual synthesis task in different ablation modes?</p>
<h2 id="hardware-dependencies">Hardware Dependencies</h2>
<ul>
<li>OS: Linux x86-machine</li>
<li>Memory : &gt; 8GB</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<p>Following are the main steps to build and run <code>Hegel</code>, the tool associate with the paper:</p>
<h3 id="building-hegel-from-sources">Building Hegel from Sources</h3>
<p>We have successfully tried building Hegel on Linux (Ubuntu 22.04) and Mac(macOs Monterey). However, the artifact also runs earlier tools <code>Synquid</code> and <code>Hoogle+</code> which we were only able to build on Linux systsms.
Consequently, we discuss the instructions for the Ubuntu build and running.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>To build Hegel following dependencies must be installed:</p>
<ul>
<li><a href="">OCaml</a> (Version &gt;= 4.03)</li>
</ul>
<pre class="hljs"><code><div>#install opam
$ apt-get install opam

#environment setup
$ opam init
$ eval `opam env`

# install a specific version of the OCaml base compiler
$ opam switch create 4.03
$ eval `opam env`

# check OCaml installation
$ which ocaml
/Users/.../.opam/4.03.0/bin/ocaml

$ ocaml -version
The OCaml toplevel, version 4.03.0
</div></code></pre>
<ul>
<li><a href="https://github.com/Z3Prover/z3">Z3 SMT Solver</a></li>
</ul>
<pre class="hljs"><code><div>$ opam install &quot;z3&gt;=4.7.1&quot;
$ eval $(opam env)
</div></code></pre>
<ul>
<li>Menhir for parsing the specification language</li>
</ul>
<pre class="hljs"><code><div>$ opam install menhir
$ eval $(opam env)
</div></code></pre>
<ul>
<li><a href="https://github.com/ocaml/ocamlbuild/">OCamlbuild</a> version &gt;= 0.12</li>
</ul>
<pre class="hljs"><code><div>$ opam install &quot;ocamlbuild&gt;=0.12&quot;
$ eval $(opam env)
</div></code></pre>
<p>To Run the Evaluations.</p>
<ul>
<li><a href="https://www.python.org/download/releases/3.0/">Python3</a></li>
</ul>
<pre class="hljs"><code><div>$ apt-get install python3
</div></code></pre>
<p>To Build <code>Synquid</code> and <code>Hoogle+</code></p>
<ul>
<li>stack: (https://docs.haskellstack.org/en/stable/README/)</li>
<li>Hoogle+: (https://github.com/davidmrdavid/hoogle_plus#readme)</li>
<li>Synquid (https://github.com/nadia-polikarpova/synquid.git)</li>
</ul>
<h3 id="building-hegel">Building Hegel</h3>
<p>After all the dependencies are installed, Hegel can be directly built using <em>ocamlbuild</em> using the script <code>build.sh</code> in the project root directory.</p>
<pre class="hljs"><code><div>
$ ./build.sh

</div></code></pre>
<p>The above build script will create a native executable <code>prudent.native</code> in the project's root directory</p>
<h3 id="building-synquid">Building Synquid</h3>
<p>The details for building <code>Synquid</code> are provided by the authors in [1]. Following are a series of steps necessary steps.</p>
<pre class="hljs"><code><div>cd synquid
stack setup &amp;&amp; stack build
</div></code></pre>
<h3 id="building-hoogle">Building Hoogle+</h3>
<p>The details for building <code>Synquid</code> are provided by the authors in [1]. Following are a series of steps necessary steps.</p>
<pre class="hljs"><code><div>cd hoogle_plus
stack setup &amp;&amp; stack build
</div></code></pre>
<h3 id="kick-the-tires--test-running-hegel">Kick the tires : Test Running Hegel</h3>
<p>**<strong><strong>This needs to be updated</strong></strong></p>
<ul>
<li>Change to run prundent on a few examples
<ul>
<li>/home/ashish/work/purdue/code/git/propsynth_safe/propsynth/quick_test.py</li>
</ul>
</li>
<li></li>
<li>Add running Hoogleplus and Synquid (We need to bring these two inside the project and make call from python script)
<ul>
<li>Change run_benchmarks.py</li>
</ul>
</li>
<li>Also make calls to the ablation studies possibly</li>
<li>This should generate all the numbers for the testcases</li>
</ul>
<p>Once, all the dependences, and the three tools are built as discussed above,</p>
<pre class="hljs"><code><div>
$ python3 quick_test.py

</div></code></pre>
<p>This should produce files <code>./kick-tires.txt</code> and <code>./kick-tires-timings.txt</code>. The file <code>./kick-tires.txt</code> has rows of the following form:</p>
<pre class="hljs"><code><div>./prudent_tests/unit/algorithmW/u_test1, Hegel, 2.15, 3, 4, 0
./synquid/test/hegel/u_test1, Synquid, 1000.00, 0, 0, 0

</div></code></pre>
<p>The above row reflects a testcase similar to the benchmakrs in Figure 11 in the paper. The colums, give the location for the test, the name of the tool (<code>Hegel</code> | <code>Synquid</code> | <code>Hoogle+</code>), the synthesis time in seconds (with a timeout depicted by a 1000.00 secs). This is followed by colums giving the number of conjuncts or disjuncts, the size of the synthesized solutions and the number of control-flow branches if any.</p>
<p>The <code>./kick-tires-timings.txt</code> contains only the synthesis timings for the runs.</p>
<p>The synthesized programs are located under the <code>./output/&lt;test-location&gt;</code> directory in the projects root directory.</p>
<p><em><strong>Talk about the ablation study</strong></em></p>
<h2 id="detailed-step-by-step-instructions-for-full-evaliations">Detailed Step-by-step Instructions for Full-evaliations</h2>
<p>The following instructions explain:</p>
<ol>
<li>The structure of the repository highlighting relevant files.</li>
<li>How to Run Hegel to generate synthesis time Figure 11, 12, and 14.</li>
<li>How to Run Hegel on individual synthesis problem.</li>
</ol>
<h3 id="structure-of-the-artifact">Structure of the Artifact.</h3>
<p>The source code for this Artifact is available at [effsynth](https://github.com/aegis-iisc/<em>TODO: path</em>****)</p>
<p>The files and directories used in this Artifact are:</p>
<ul>
<li><code>quick_test.py</code> : a script to test the successfull installation of Cobalt</li>
<li><code>run_benchmarks.py</code> : a script to run Cobalt for all the benchmarks in the paper producing results.</li>
<li><code>prudent_tests/hegel/Hoogle+/**.spec</code> contains benhcmarks in Figure 11.</li>
<li><code>prudent_tests/hegel/Cobalt/**.spec</code> contains benchmarks in Figure 12</li>
</ul>
<h3 id="running-the-evaluation-using-a-push-button">Running the evaluation using a push button.</h3>
<pre class="hljs"><code><div>$ cd project_root
$ python3 run_benchmarks.py
</div></code></pre>
<p><strong>TODO: Need to change the full script now</strong>
**TODO: Generate files <code>results-full.txt</code> and <code>full-timings.txt</code> and <code>full-ablation.txt</code></p>
<p>Once the script terminates, it will produce a files <code>results-full.txt</code> and <code>full-timings.txt</code> which contains entries for each benchmark in Fig 11 and 12 in the following format. (Showing the result for first Fig 11 benchmark <code>nth</code>).
The time 1000 shows the case where the tool timed out.</p>
<p>Further the run also generate the results for ablation studies (Figure 14) in the file <code>full-ablation.txt</code> in the following form, each row represents the timings for the variant of <code>hegel</code>.</p>
<pre class="hljs"><code><div>********************************
./synth_tests/unit/checked/parsers/png_simple.spec_cobalt : 0.02336999999999989
./synth_tests/unit/checked/parsers/png_simple.spec_fw-alone : 1.5463100000000054
./synth_tests/unit/checked/parsers/png_simple.spec_bw-alone : 0.017842999999970743
./synth_tests/unit/checked/parsers/png_simple.spec_no-cdcl : 1000
 ********************************
 --&gt;
 
</div></code></pre>
<h2 id="reusability-guide">Reusability Guide</h2>
<ul>
<li>Outline of the Artifact</li>
<li>How to extend the tool</li>
<li>Running individual</li>
</ul>
<h3 id="running-an-individual-synthesis-query">Running an individual synthesis query</h3>
<p><strong>These modes also need some change</strong>
The general usage for Hegel:</p>
<pre class="hljs"><code><div>$ ./prudent.native [-bi] [cdcl] -k &lt;maximum-path-length&gt; &lt;spec-file1&gt;
</div></code></pre>
<p>To run Hegel to get the synthesis results using the complete hegel mode ($\textcolor{blue}{blue}$ bar in Fig 14):</p>
<pre class="hljs"><code><div>$ ./prudent.native -bi -cdcl -k &lt;maximum-path-length&gt; file.spec 
</div></code></pre>
<ul>
<li>To run Hegel in Hegel(-S) mode ($\textcolor{yellow}{yellow}$ bar in Fig 14):</li>
</ul>
<pre class="hljs"><code><div>$ ./prudent.native -cdcl -k &lt;maximum-path-length&gt; file.spec
</div></code></pre>
<ul>
<li>To run Hegel in Hegel(-P) mode ($\textcolor{green}{green}$ bar in Fig 14):</li>
</ul>
<pre class="hljs"><code><div>$ ./prudent.native -bi -k &lt;maximum-path-length&gt; file.spec
</div></code></pre>
<ul>
<li>To run Hegel in Hegel(-ALL) mode ($\textcolor{red}{red}$ bar in Fig 14):</li>
</ul>
<pre class="hljs"><code><div>$  effsynth.native -k &lt;maximum-path-length&gt; file.spec
</div></code></pre>
<h3 id="note-about-the-paper-under-major-revision">Note about the paper under Major Revision</h3>
<p>*********** A similar note is needed about our revision *************</p>
<hr>
<p>Major TODO</p>
<blockquote>
<blockquote>
<p>CLeaning up RQ2 benchmakrs  -- done
Updating run-full.py --- simple, one thing is now we have all the benchmarks
Ablation runs -- don't do it
Create link
Share</p>
</blockquote>
</blockquote>
<hr>

</body>
</html>
